<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buscador de Sensibilidad Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Estilos personalizados para un look gaming */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a1a2e; /* Fondo oscuro */
            color: #ffffff;
        }
        .card-result {
            /* Color de fondo ajustado para un mejor contraste */
            background-color: #0f3460; 
            border-left: 4px solid #e94560; /* L칤nea roja/rosa de acento */
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
            transition: transform 0.3s ease;
        }
        .card-result:hover {
            transform: translateY(-3px);
        }
        .text-dpi-custom { color: #facc15; /* yellow-400 */ }
        .text-dpi-default { color: #4ade80; /* green-400 */ }

        /* Colores para Niveles de Sensibilidad */
        .level-ALTA { background-color: #f87171; /* red-400 */ color: #330000; }
        .level-MEDIA { background-color: #facc15; /* yellow-400 */ color: #332100; }
        .level-BAJA { background-color: #4ade80; /* green-400 */ color: #003300; }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-2xl mx-auto">
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-extrabold text-red-400 mb-2">SENSIBILIDADES FABI FF</h1>
            <p class="text-lg text-gray-300">Encuentra la configuraci칩n ideal para dar "Todo Rojo" en tu dispositivo.</p>
        </header>

        <section class="mb-8 p-6 bg-gray-800 rounded-2xl shadow-lg border border-gray-700">
            <label class="block text-lg font-semibold mb-3 text-pink-300">Selecciona el Modelo:</label>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 items-stretch">
                <select 
                    id="brandSelect" 
                    onchange="populateModels()" 
                    class="flex-grow p-3 rounded-lg bg-gray-900 border border-gray-700 focus:ring-red-400 focus:border-red-400 text-white"
                >
                    <option value="">-- Selecciona la Marca --</option>
                </select>
                
                <select 
                    id="modelSelect" 
                    onchange="searchSensitivity()" 
                    class="flex-grow p-3 rounded-lg bg-gray-900 border border-gray-700 focus:ring-red-400 focus:border-red-400 text-white"
                    disabled
                >
                    <option value="">-- Selecciona el Modelo Espec칤fico --</option>
                </select>
            </div>
            <p class="text-xs text-gray-500 mt-2">Al seleccionar el modelo espec칤fico, ver치s todas sus sensibilidades (Alta, Media, Baja).</p>
        </section>
        <section id="resultsContainer" class="mt-10">
            <div id="loadingMessage" class="p-6 bg-gray-800 rounded-lg text-center">
                <p class="text-xl font-semibold text-blue-400 animate-pulse">Base de datos cargada. 춰A seleccionar! 游꿢</p>
            </div>
        </section>
    </div>

    <script type="module">
        // --- BASE DE DATOS FINAL Y COMPLETA (TODOS CON ALTA, MEDIA, BAJA Y iPhone ACTUALIZADO) ---
        const INITIAL_DATA = [
            // --- SAMSUNG GALAXY S21 ULTRA ---
            { base_model: "Samsung Galaxy S21 Ultra", model: "S21 Ultra (Sensibilidad ALTA)", dpi: 580, general: 100, red_dot: 98, scope_2x: 95, scope_4x: 90, button: 45, method: "CON DPI (Extrema/Competitiva)", note: "DPI muy alto para movimientos 360 y arrastre vertical r치pido. Requiere buen control de recoil.", has_dpi: true, level: "ALTA" },
            { base_model: "Samsung Galaxy S21 Ultra", model: "S21 Ultra (Sensibilidad MEDIA)", dpi: 480, general: 95, red_dot: 90, scope_2x: 85, scope_4x: 78, button: 50, method: "CON DPI (Equilibrada/Pro)", note: "Punto dulce entre velocidad y control. Ideal para la mayor칤a de los jugadores de alto nivel.", has_dpi: true, level: "MEDIA" },
            { base_model: "Samsung Galaxy S21 Ultra", model: "S21 Ultra (Sensibilidad BAJA)", dpi: "Default (411)", general: 98, red_dot: 95, scope_2x: 92, scope_4x: 85, button: 55, method: "SIN DPI (F치brica/Estable)", note: "Usa el DPI de f치brica. Prioriza la estabilidad y el control del recoil en distancias largas.", has_dpi: false, level: "BAJA" },

            // --- SAMSUNG GALAXY S23 ULTRA ---
            { base_model: "Samsung Galaxy S23 Ultra", model: "S23 Ultra (Sensibilidad ALTA)", dpi: 720, general: 98, red_dot: 95, scope_2x: 92, scope_4x: 88, button: 50, method: "CON DPI", note: "Alta fluidez y precisi칩n, recomendado para 'Arrastre'.", has_dpi: true, level: "ALTA" },
            { base_model: "Samsung Galaxy S23 Ultra", model: "S23 Ultra (Sensibilidad MEDIA)", dpi: 580, general: 94, red_dot: 90, scope_2x: 85, scope_4x: 80, button: 52, method: "CON DPI (Estable)", note: "Equilibrio ideal para jugabilidad pro.", has_dpi: true, level: "MEDIA" },
            { base_model: "Samsung Galaxy S23 Ultra", model: "S23 Ultra (Sensibilidad BAJA)", dpi: "Default (384)", general: 98, red_dot: 95, scope_2x: 92, scope_4x: 85, button: 55, method: "SIN DPI (F치brica)", note: "DPI de f치brica. Prioriza el control de miras largas.", has_dpi: false, level: "BAJA" },

            // --- SAMSUNG GALAXY A54 ---
            { base_model: "Samsung Galaxy A54", model: "A54 (Sensibilidad ALTA)", dpi: 650, general: 95, red_dot: 90, scope_2x: 85, scope_4x: 78, button: 50, method: "CON DPI (R치pida)", note: "M치xima respuesta para el A54.", has_dpi: true, level: "ALTA" },
            { base_model: "Samsung Galaxy A54", model: "A54 (Sensibilidad MEDIA)", dpi: 520, general: 90, red_dot: 85, scope_2x: 82, scope_4x: 75, button: 55, method: "CON DPI (Est치ndar)", note: "칍ptimo para sensibilidad media/alta y control.", has_dpi: true, level: "MEDIA" },
            { base_model: "Samsung Galaxy A54", model: "A54 (Sensibilidad BAJA)", dpi: "Default (384)", general: 95, red_dot: 90, scope_2x: 88, scope_4x: 80, button: 55, method: "SIN DPI (Comodidad)", note: "Ideal para jugar a 40 FPS.", has_dpi: false, level: "BAJA" },

            // --- REDMI NOTE 14 PRO ---
            { base_model: "Redmi Note 14 Pro", model: "Note 14 Pro (Sensibilidad ALTA)", dpi: 680, general: 98, red_dot: 95, scope_2x: 92, scope_4x: 88, button: 48, method: "CON DPI (Extrema)", note: "Aprovecha la pantalla 120Hz. Ideal para jugadores agresivos y 360s r치pidos.", has_dpi: true, level: "ALTA" },
            { base_model: "Redmi Note 14 Pro", model: "Note 14 Pro (Sensibilidad MEDIA)", dpi: 520, general: 94, red_dot: 90, scope_2x: 85, scope_4x: 80, button: 50, method: "CON DPI (Estable)", note: "Mejor balance para tiro a la cabeza en distancias medias. Menor recoil.", has_dpi: true, level: "MEDIA" },
            { base_model: "Redmi Note 14 Pro", model: "Note 14 Pro (Sensibilidad BAJA)", dpi: "Default (384)", general: 98, red_dot: 95, scope_2x: 90, scope_4x: 85, button: 52, method: "SIN DPI (F치brica)", note: "DPI de f치brica. Compensado con alta sensibilidad in-game para control de recoil.", has_dpi: false, level: "BAJA" },

            // --- REDMI 14C ---
            { base_model: "Redmi 14C", model: "Redmi 14C (Sensibilidad ALTA)", dpi: 600, general: 95, red_dot: 92, scope_2x: 88, scope_4x: 82, button: 50, method: "CON DPI (Agresiva)", note: "DPI alto para maximizar la velocidad de giro en el Helio G81. Ideal para distancias cortas.", has_dpi: true, level: "ALTA" },
            { base_model: "Redmi 14C", model: "Redmi 14C (Sensibilidad MEDIA)", dpi: 520, general: 90, red_dot: 86, scope_2x: 82, scope_4x: 75, button: 55, method: "CON DPI (Equilibrada)", note: "Punto 칩ptimo entre control y velocidad. Recomendado para la mayor칤a de jugadores.", has_dpi: true, level: "MEDIA" },
            { base_model: "Redmi 14C", model: "Redmi 14C (Sensibilidad BAJA)", dpi: "Default (380)", general: 95, red_dot: 90, scope_2x: 85, scope_4x: 78, button: 58, method: "SIN DPI (Estable)", note: "DPI de f치brica. Mayor estabilidad en tiro y control de recoil.", has_dpi: false, level: "BAJA" },

            // --- REDMI NOTE 11 (COMPLETADO) ---
            { base_model: "Redmi Note 11", model: "Note 11 (Sensibilidad ALTA)", dpi: 600, general: 95, red_dot: 92, scope_2x: 88, scope_4x: 80, button: 50, method: "CON DPI (R치pida)", note: "M치xima respuesta y arrastre vertical.", has_dpi: true, level: "ALTA" },
            { base_model: "Redmi Note 11", model: "Note 11 (Sensibilidad MEDIA)", dpi: 520, general: 91, red_dot: 87, scope_2x: 83, scope_4x: 75, button: 55, method: "CON DPI (Medio)", note: "DPI equilibrado para rendimiento en AMOLED.", has_dpi: true, level: "MEDIA" },
            { base_model: "Redmi Note 11", model: "Note 11 (Sensibilidad BAJA)", dpi: "Default (409)", general: 95, red_dot: 92, scope_2x: 88, scope_4x: 80, button: 55, method: "SIN DPI (Segura)", note: "DPI de f치brica. Control en rangos medios.", has_dpi: false, level: "BAJA" },

            // --- POCO X6 (COMPLETADO) ---
            { base_model: "Poco X6", model: "Poco X6 (Sensibilidad ALTA)", dpi: 630, general: 93, red_dot: 89, scope_2x: 84, scope_4x: 75, button: 45, method: "CON DPI (Competitiva)", note: "Ideal para jugadores que usan agarre de 4 dedos.", has_dpi: true, level: "ALTA" },
            { base_model: "Poco X6", model: "Poco X6 (Sensibilidad MEDIA)", dpi: 550, general: 90, red_dot: 85, scope_2x: 80, scope_4x: 70, button: 46, method: "CON DPI", note: "Buen equilibrio entre velocidad y control.", has_dpi: true, level: "MEDIA" },
            { base_model: "Poco X6", model: "Poco X6 (Sensibilidad BAJA)", dpi: "Default (440)", general: 95, red_dot: 92, scope_2x: 88, scope_4x: 80, button: 48, method: "SIN DPI (Estable)", note: "DPI de f치brica, prioriza la precisi칩n.", has_dpi: false, level: "BAJA" },

            // --- REDMI 10 (COMPLETADO) ---
            { base_model: "Redmi 10", model: "Redmi 10 (Sensibilidad ALTA)", dpi: 580, general: 93, red_dot: 89, scope_2x: 84, scope_4x: 75, button: 55, method: "CON DPI (R치pida)", note: "R치pida para maximizar el desempe침o en este modelo.", has_dpi: true, level: "ALTA" },
            { base_model: "Redmi 10", model: "Redmi 10 (Sensibilidad MEDIA)", dpi: 520, general: 91, red_dot: 87, scope_2x: 83, scope_4x: 73, button: 57, method: "CON DPI (Medio)", note: "Punto dulce para arrastre vertical suave.", has_dpi: true, level: "MEDIA" },
            { base_model: "Redmi 10", model: "Redmi 10 (Sensibilidad BAJA)", dpi: 500, general: 90, red_dot: 86, scope_2x: 80, scope_4x: 70, button: 57, method: "CON DPI (Baja)", note: "Conservador para evitar el lag.", has_dpi: true, level: "BAJA" },

            // --- IPHONE 15 PRO MAX (ACTUALIZADO CURSOR DESLIZANTE) ---
            { base_model: "iPhone 15 Pro Max", model: "15 Pro Max (Sensibilidad ALTA)", dpi: "120 (M치x)", general: 100, red_dot: 99, scope_2x: 96, scope_4x: 94, button: 45, method: "Velocidad Cursor Deslizante", note: "Valor m치ximo (120) para giro r치pido (Cursor Deslizante).", has_dpi: true, level: "ALTA" },
            { base_model: "iPhone 15 Pro Max", model: "15 Pro Max (Sensibilidad MEDIA)", dpi: "105", general: 98, red_dot: 95, scope_2x: 92, scope_4x: 88, button: 48, method: "Velocidad Cursor Deslizante", note: "Velocidad equilibrada (105) para Cursor Deslizante.", has_dpi: true, level: "MEDIA" },
            { base_model: "iPhone 15 Pro Max", model: "15 Pro Max (Sensibilidad BAJA)", dpi: "Default (80)", general: 95, red_dot: 92, scope_2x: 88, scope_4x: 80, button: 50, method: "SIN DPI (F치brica)", note: "Usa el valor de f치brica (80) en Cursor Deslizante. Mayor control.", has_dpi: false, level: "BAJA" },

            // --- IPHONE 11 (ACTUALIZADO CURSOR DESLIZANTE) ---
            { base_model: "iPhone 11", model: "iPhone 11 (Sensibilidad ALTA)", dpi: "120 (M치x)", general: 100, red_dot: 98, scope_2x: 95, scope_4x: 90, button: 45, method: "Velocidad Cursor Deslizante", note: "M치xima velocidad (120) de Cursor Deslizante y arrastre.", has_dpi: true, level: "ALTA" },
            { base_model: "iPhone 11", model: "iPhone 11 (Sensibilidad MEDIA)", dpi: "100", general: 98, red_dot: 95, scope_2x: 92, scope_4x: 88, button: 48, method: "Velocidad Cursor Deslizante", note: "Velocidad de Cursor Deslizante equilibrada (100).", has_dpi: true, level: "MEDIA" },
            { base_model: "iPhone 11", model: "iPhone 11 (Sensibilidad BAJA)", dpi: "Default (80)", general: 95, red_dot: 92, scope_2x: 88, scope_4x: 80, button: 52, method: "SIN DPI (F치brica)", note: "Usa el valor de f치brica (80) en Cursor Deslizante para estabilidad total.", has_dpi: false, level: "BAJA" },

            // --- MOTOROLA EDGE 40 (COMPLETADO) ---
            { base_model: "Motorola Edge 40", model: "Edge 40 (Sensibilidad ALTA)", dpi: 700, general: 98, red_dot: 95, scope_2x: 90, scope_4x: 85, button: 48, method: "CON DPI (Extrema)", note: "DPI alto para aprovechar la pantalla fluida del Edge 40.", has_dpi: true, level: "ALTA" },
            { base_model: "Motorola Edge 40", model: "Edge 40 (Sensibilidad MEDIA)", dpi: 650, general: 96, red_dot: 92, scope_2x: 88, scope_4x: 80, button: 52, method: "CON DPI", note: "칍ptimo para sensibilidad media/alta y control.", has_dpi: true, level: "MEDIA" },
            { base_model: "Motorola Edge 40", model: "Edge 40 (Sensibilidad BAJA)", dpi: 550, general: 92, red_dot: 88, scope_2x: 84, scope_4x: 75, button: 55, method: "CON DPI (Estable)", note: "DPI conservador para m치ximo control de recoil.", has_dpi: true, level: "BAJA" },
            
            // --- INFINIX SMART 9 (YA ESTABA COMPLETO) ---
            { base_model: "Infinix Smart 9", model: "Infinix Smart 9 (Sensibilidad ALTA)", dpi: 580, general: 93, red_dot: 88, scope_2x: 83, scope_4x: 75, button: 52, method: "CON DPI (R치pida)", note: "DPI alto para maximizar la velocidad de giro.", has_dpi: true, level: "ALTA" },
            { base_model: "Infinix Smart 9", model: "Infinix Smart 9 (Sensibilidad MEDIA)", dpi: 520, general: 90, red_dot: 85, scope_2x: 80, scope_4x: 72, button: 55, method: "CON DPI (Medio)", note: "Punto dulce para arrastre y control en miras 2x.", has_dpi: true, level: "MEDIA" },
            { base_model: "Infinix Smart 9", model: "Infinix Smart 9 (Sensibilidad BAJA)", dpi: "Default (360)", general: 95, red_dot: 90, scope_2x: 85, scope_4x: 78, button: 58, method: "SIN DPI (F치brica)", note: "DPI de f치brica. Mayor estabilidad en tiro y control de recoil.", has_dpi: false, level: "BAJA" },
            
            // --- OTROS REDMI (YA ESTABAN COMPLETOS O CASI) ---
            { base_model: "Redmi 15 Plus", model: "Redmi 15 Plus (Sensibilidad ALTA)", dpi: 750, general: 99, red_dot: 96, scope_2x: 93, scope_4x: 89, button: 45, method: "CON DPI (Extrema)", note: "Velocidad m치xima para 144Hz. Muy sensible.", has_dpi: true, level: "ALTA" },
            { base_model: "Redmi 15 Plus", model: "Redmi 15 Plus (Sensibilidad MEDIA)", dpi: "Default (450)", general: 100, red_dot: 100, scope_2x: 95, scope_4x: 90, button: 50, method: "SIN DPI (Pro Player)", note: "Sensibilidad in-game m치xima y DPI de f치brica.", has_dpi: false, level: "MEDIA" },
            { base_model: "Redmi Note 13 Pro", model: "Redmi Note 13 Pro (Sensibilidad ALTA)", dpi: 620, general: 96, red_dot: 93, scope_2x: 89, scope_4x: 82, button: 48, method: "CON DPI (Equilibrada Pro)", note: "Jugadores agresivos con buen control de recoil.", has_dpi: true, level: "ALTA" },
            { base_model: "Redmi Note 13 Pro", model: "Redmi Note 13 Pro (Sensibilidad MEDIA)", dpi: "Default (440)", general: 98, red_dot: 95, scope_2x: 91, scope_4x: 86, button: 52, method: "SIN DPI (Control)", note: "Prioriza precisi칩n, usa DPI de f치brica.", has_dpi: false, level: "MEDIA" },
            { base_model: "Redmi Note 13 Pro", model: "Redmi Note 13 Pro (Sensibilidad BAJA)", dpi: 500, general: 90, red_dot: 85, scope_2x: 80, scope_4x: 75, button: 55, method: "CON DPI (Baja)", note: "Bajo DPI para estabilidad extrema.", has_dpi: true, level: "BAJA" },
            { base_model: "Redmi Note 13", model: "Redmi Note 13 (Sensibilidad ALTA)", dpi: 600, general: 96, red_dot: 93, scope_2x: 89, scope_4x: 82, button: 50, method: "CON DPI (R치pida)", note: "R치pida para maximizar la velocidad de giro.", has_dpi: true, level: "ALTA" },
            { base_model: "Redmi Note 13", model: "Redmi Note 13 (Sensibilidad MEDIA)", dpi: 560, general: 93, red_dot: 89, scope_2x: 85, scope_4x: 77, button: 53, method: "CON DPI (Media)", note: "Sensibilidad suave y r치pida. Excelente para arrastre vertical.", has_dpi: true, level: "MEDIA" },
            { base_model: "Redmi Note 13", model: "Redmi Note 13 (Sensibilidad BAJA)", dpi: "Default (400)", general: 95, red_dot: 91, scope_2x: 87, scope_4x: 80, button: 53, method: "SIN DPI (Est치ndar)", note: "DPI de f치brica. Configuraci칩n de juego equilibrada.", has_dpi: false, level: "BAJA" },
            { base_model: "Redmi Note 12 Pro", model: "Redmi Note 12 Pro (Sensibilidad ALTA)", dpi: 620, general: 98, red_dot: 95, scope_2x: 92, scope_4x: 85, button: 48, method: "CON DPI (R치pida)", note: "M치xima respuesta para pantallas AMOLED.", has_dpi: true, level: "ALTA" },
            { base_model: "Redmi Note 12 Pro", model: "Redmi Note 12 Pro (Sensibilidad MEDIA)", dpi: 580, general: 96, red_dot: 93, scope_2x: 89, scope_4x: 80, button: 50, method: "CON DPI (Equilibrada)", note: "Respuesta r치pida para pantallas AMOLED.", has_dpi: true, level: "MEDIA" },
            { base_model: "Redmi Note 12 Pro", model: "Redmi Note 12 Pro (Sensibilidad BAJA)", dpi: "Default (440)", general: 98, red_dot: 95, scope_2x: 92, scope_4x: 85, button: 54, method: "SIN DPI (Segura)", note: "DPI de f치brica. Control en rangos medios.", has_dpi: false, level: "BAJA" },
            { base_model: "Redmi 12", model: "Redmi 12 (Sensibilidad ALTA)", dpi: 560, general: 95, red_dot: 90, scope_2x: 85, scope_4x: 77, button: 52, method: "CON DPI (R치pida)", note: "Velocidad extrema para un arrastre r치pido. Requiere control de recoil.", has_dpi: true, level: "ALTA" },
            { base_model: "Redmi 12", model: "Redmi 12 (Sensibilidad MEDIA)", dpi: 520, general: 91, red_dot: 87, scope_2x: 83, scope_4x: 75, button: 55, method: "CON DPI (Equilibrada)", note: "El mejor punto medio entre velocidad y precisi칩n.", has_dpi: true, level: "MEDIA" },
            { base_model: "Redmi 12", model: "Redmi 12 (Sensibilidad BAJA)", dpi: "Default (395)", general: 96, red_dot: 91, scope_2x: 87, scope_4x: 80, button: 58, method: "SIN DPI (Estable)", note: "DPI de f치brica. Prioriza la estabilidad y el control de la mira.", has_dpi: false, level: "BAJA" },

        ];
        // --- FIN DE BASE DE DATOS FINAL ---


        // --- FUNCIONES DE RENDERIZADO ---
        window.renderSensor = (label, value) => {
            return `
                <div class="flex flex-col items-center p-2 bg-gray-900 rounded-md">
                    <span class="text-pink-300 font-semibold">${label}</span>
                    <span class="text-xl font-extrabold">${value}%</span>
                </div>
            `;
        }

        window.renderResult = (config, container) => {
            const isDefaultDPI = !config.has_dpi || config.dpi === 'N/A' || String(config.dpi).toLowerCase().includes('default');
            const dpiColorClass = isDefaultDPI ? 'text-dpi-default' : 'text-dpi-custom';
            const levelClass = `level-${config.level || 'MEDIA'}`;
            
            let dpiLabel = 'DPI (Ancho M치s Peque침o):';
            if (config.base_model.includes('iPhone')) {
                dpiLabel = 'Cursor Deslizante (iOS):';
            }

            const html = `
                <div class="card-result p-6 rounded-xl space-y-4 mb-6">
                    <div class="flex justify-between items-center pb-2 border-b border-gray-700">
                        <h2 class="text-2xl font-extrabold text-pink-300">${config.model}</h2>
                        <span class="px-3 py-1 rounded-full text-sm font-bold shadow-md ${levelClass}">NIVEL ${config.level || 'MEDIA'}</span>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4 text-sm font-medium pt-3">
                        <div class="bg-gray-700/50 p-3 rounded-lg flex justify-between items-center">
                            <span>${dpiLabel}</span>
                            <span class="text-lg font-bold ${dpiColorClass}">${config.dpi}</span>
                        </div>
                        <div class="bg-gray-700/50 p-3 rounded-lg flex justify-between items-center">
                            <span>Bot칩n de Disparo:</span>
                            <span class="text-xl font-extrabold text-red-500 bg-red-900/40 px-3 py-1 rounded-md border border-red-500">${config.button}%</span>
                        </div>
                    </div>

                    <div class="bg-gray-700/50 p-4 rounded-lg">
                        <h3 class="text-lg font-bold mb-2 text-red-400">SENSIBILIDAD IN-GAME</h3>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-3 text-xs">
                            ${renderSensor('General', config.general)}
                            ${renderSensor('Punto Rojo', config.red_dot)}
                            ${renderSensor('Mira 2x', config.scope_2x)}
                            ${renderSensor('Mira 4x', config.scope_4x)}
                        </div>
                    </div>

                    <p class="text-sm italic text-gray-400 pt-2 border-t border-gray-700">Nota: ${config.note}</p>
                </div>
            `;
            container.insertAdjacentHTML('beforeend', html); 
        }

        // --- L칍GICA DE MEN칔S DESPLEGABLES EN CASCADA ---

        const extractBaseModels = (data) => {
            const brands = data.map(name => {
                if (name.base_model.includes('Redmi') || name.base_model.includes('Poco')) return 'Xiaomi / Redmi / Poco';
                if (name.base_model.includes('Samsung Galaxy')) return 'Samsung Galaxy';
                if (name.base_model.includes('iPhone')) return 'iPhone'; 
                if (name.base_model.includes('Infinix')) return 'Infinix';
                if (name.base_model.includes('Motorola')) return 'Motorola';
                return name.base_model.split(' ')[0]; 
            });
            // Ordenamos, eliminamos duplicados y colocamos las marcas m치s importantes arriba.
            return [...new Set(brands)].sort((a, b) => {
                if (a === 'Xiaomi / Redmi / Poco') return -1;
                if (b === 'Xiaomi / Redmi / Poco') return 1;
                if (a === 'Samsung Galaxy') return -1;
                if (b === 'Samsung Galaxy') return 1;
                return a.localeCompare(b);
            });
        };

        const initializeSelectors = () => {
            const brandSelect = document.getElementById('brandSelect');
            const brands = extractBaseModels(INITIAL_DATA); 

            brands.forEach(brand => {
                const option = document.createElement('option');
                option.value = brand;
                option.textContent = brand;
                brandSelect.appendChild(option);
            });
        };

        window.populateModels = () => {
            const brandSelect = document.getElementById('brandSelect');
            const modelSelect = document.getElementById('modelSelect');
            const selectedBrand = brandSelect.value;

            modelSelect.innerHTML = '<option value="">-- Selecciona el Modelo Espec칤fico --</option>';
            modelSelect.disabled = true;

            if (!selectedBrand) return;

            // 1. Filtrar la base de datos por la marca seleccionada
            let filteredByBrand;
            if (selectedBrand === 'Xiaomi / Redmi / Poco') {
                filteredByBrand = INITIAL_DATA.filter(item => 
                    item.base_model.includes('Redmi') || item.base_model.includes('Poco')
                );
            } else if (selectedBrand === 'iPhone') {
                 filteredByBrand = INITIAL_DATA.filter(item => 
                    item.base_model.includes('iPhone')
                );
            } else {
                filteredByBrand = INITIAL_DATA.filter(item => 
                    item.base_model.includes(selectedBrand)
                );
            }
            
            // 2. Obtener modelos 칰nicos dentro de esa marca y ordenarlos
            const uniqueModels = [...new Set(filteredByBrand.map(item => item.base_model))].sort();

            uniqueModels.forEach(model => {
                const option = document.createElement('option');
                option.value = model;
                option.textContent = model;
                modelSelect.appendChild(option);
            });

            modelSelect.disabled = false;
        };
        
        // L칍GICA PRINCIPAL DE B칔SQUEDA (LEE EL MEN칔 DESPLEGABLE)
        window.searchSensitivity = () => {
            const dbToUse = INITIAL_DATA; 
            const modelSelect = document.getElementById('modelSelect');
            const input = modelSelect.value;
            const resultsContainer = document.getElementById('resultsContainer');
            
            if (!input) { 
                resultsContainer.innerHTML = `<p class="text-center text-yellow-400">Por favor, selecciona un modelo espec칤fico de la lista.</p>`;
                return;
            }

            resultsContainer.innerHTML = ''; 

            // El input es directamente el 'base_model' para filtrar
            const targetBaseModel = input; 
            const relevantConfigs = dbToUse.filter(device => 
                device.base_model === targetBaseModel
            );
            
            // ... (Resto de la l칩gica de ordenamiento y renderizado)

            // Ordenar las configuraciones por nivel (ALTA, MEDIA, BAJA) antes de mostrar
            const sortedConfigs = relevantConfigs.sort((a, b) => {
                const order = { "ALTA": 1, "MEDIA": 2, "BAJA": 3 };
                return (order[a.level] || 4) - (order[b.level] || 4);
            });

            // Renderizar los resultados
            resultsContainer.innerHTML = ''; 
            resultsContainer.insertAdjacentHTML('afterbegin', `<h2 class="text-3xl font-extrabold text-white mb-6">Resultados para: <span class="text-pink-400">${targetBaseModel}</span></h2>`);
            
            sortedConfigs.forEach(config => {
                renderResult(config, resultsContainer);
            });
        }
        
        // Carga de la aplicaci칩n al iniciar la p치gina
        window.onload = initializeSelectors; 

        // Se mantienen las importaciones de Firebase por si se desea usar en el futuro
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        const firebaseConfig = {}; // Configuraci칩n vac칤a
        try {
            const app = initializeApp(firebaseConfig);
        } catch (e) {}

    </script>
</body>
</html>


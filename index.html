<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buscador de Sensibilidad Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Estilos personalizados para un look gaming */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a1a2e; /* Fondo oscuro */
            color: #ffffff;
        }
        .card-result {
            /* Color de fondo ajustado para un mejor contraste */
            background-color: #0f3460; 
            border-left: 4px solid #e94560; /* LÃ­nea roja/rosa de acento */
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
            transition: transform 0.3s ease;
        }
        .card-result:hover {
            transform: translateY(-3px);
        }
        .btn-search {
            background-color: #e94560; /* BotÃ³n rojo de acento */
            transition: background-color 0.2s;
        }
        .btn-search:hover {
            background-color: #ff6a80;
        }
        .text-dpi-custom { color: #facc15; /* yellow-400 */ }
        .text-dpi-default { color: #4ade80; /* green-400 */ }

        /* Colores para Niveles de Sensibilidad */
        .level-ALTA { background-color: #f87171; /* red-400 */ color: #330000; }
        .level-MEDIA { background-color: #facc15; /* yellow-400 */ color: #332100; }
        .level-BAJA { background-color: #4ade80; /* green-400 */ color: #003300; }

        /* Ocultar el Toggle ya que ahora mostramos todos los niveles */
        .dpi-toggle-section { display: none; }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-2xl mx-auto">
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-extrabold text-red-400 mb-2">SENSIBILIDADES FABI FF</h1>
            <p class="text-lg text-gray-300">Encuentra la configuraciÃ³n ideal para dar "Todo Rojo" en tu dispositivo.</p>
        </header>

        <section class="mb-8 p-6 bg-gray-800 rounded-2xl shadow-lg border border-gray-700">
            <label for="deviceInput" class="block text-lg font-semibold mb-3 text-pink-300">Ingresa el Modelo de tu Celular:</label>
            <div class="flex flex-col md:flex-row gap-4 items-stretch md:items-center">
                <input 
                    type="text" 
                    id="deviceInput" 
                    placeholder="Ej: Redmi 14 Pro, A05, iPhone 11" 
                    class="flex-grow p-3 rounded-lg bg-gray-900 border border-gray-700 focus:ring-red-400 focus:border-red-400 text-white"
                    onkeydown="if(event.key === 'Enter') searchSensitivity()"
                >
                
                <div class="flex items-center justify-between md:justify-start space-x-4 p-3 bg-gray-900 rounded-lg dpi-toggle-section">
                    <label class="text-sm font-semibold text-gray-400">SIN DPI</label>
                    <div class="relative inline-block w-14 mr-2 align-middle select-none transition duration-200 ease-in toggle-switch">
                        <input type="checkbox" name="toggle" id="dpiToggle" class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer" checked>
                        <label for="dpiToggle" class="toggle-track block overflow-hidden h-6 rounded-full bg-red-500 cursor-pointer"></label>
                    </div>
                    <label class="text-sm font-semibold text-yellow-400">CON DPI</label>
                </div>
                
                <button 
                    onclick="searchSensitivity()" 
                    class="btn-search text-white font-bold py-3 px-6 rounded-lg hover:bg-pink-500 shadow-md whitespace-nowrap"
                >
                    Buscar ðŸ”Ž
                </button>
            </div>
            <p class="text-xs text-gray-500 mt-2">Ahora se muestran las sensibilidades **BAJA, MEDIA y ALTA** para el modelo que busques.</p>
        </section>

        <section id="resultsContainer" class="mt-10">
            <div id="loadingMessage" class="p-6 bg-gray-800 rounded-lg text-center">
                <p class="text-xl font-semibold text-blue-400 animate-pulse">Cargando Base de Datos de Sensibilidad...</p>
            </div>
        </section>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, onSnapshot, collection, getDocs } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        
        // ConfiguraciÃ³n de la base de datos y variables globales
        setLogLevel('Debug');
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        let db;
        let auth;
        let SENSITIVITY_DB = []; 
        let isAuthReady = false; 
        let isDataLoaded = false; 

        // --- BASE DE DATOS REESTRUCTURADA CON NIVELES (BAJA/MEDIA/ALTA) ---
        const INITIAL_DATA = [
            // --- XIAOMI / REDMI: GAMING (15 Plus) ---
            { base_model: "Redmi 15 Plus", model: "Redmi 15 Plus (Sensibilidad ALTA)", dpi: 750, general: 99, red_dot: 96, scope_2x: 93, scope_4x: 89, button: 45, method: "CON DPI (Extrema)", note: "Velocidad mÃ¡xima para 144Hz. Muy sensible.", has_dpi: true, level: "ALTA" },
            { base_model: "Redmi 15 Plus", model: "Redmi 15 Plus (Sensibilidad MEDIA)", dpi: "Default (450)", general: 100, red_dot: 100, scope_2x: 95, scope_4x: 90, button: 50, method: "SIN DPI (Pro Player)", note: "Sensibilidad in-game mÃ¡xima y DPI de fÃ¡brica.", has_dpi: false, level: "MEDIA" },

            // --- XIAOMI / REDMI: GAMA ALTA / MEDIA ALTA (Note 14/13/12 Pro) ---
            // --- Redmi Note 14 Pro (3 Niveles) ---
            { base_model: "Redmi Note 14 Pro", model: "Redmi Note 14 Pro (Sensibilidad ALTA)", dpi: 680, general: 98, red_dot: 95, scope_2x: 92, scope_4x: 88, button: 48, method: "CON DPI (Extrema)", note: "Aprovecha la pantalla 120Hz. Ideal para jugadores agresivos y 360s rÃ¡pidos.", has_dpi: true, level: "ALTA" },
            { base_model: "Redmi Note 14 Pro", model: "Redmi Note 14 Pro (Sensibilidad MEDIA)", dpi: 520, general: 94, red_dot: 90, scope_2x: 85, scope_4x: 80, button: 50, method: "CON DPI (Estable)", note: "Mejor balance para tiro a la cabeza en distancias medias. Menor recoil.", has_dpi: true, level: "MEDIA" },
            { base_model: "Redmi Note 14 Pro", model: "Redmi Note 14 Pro (Sensibilidad BAJA)", dpi: "Default (384)", general: 98, red_dot: 95, scope_2x: 90, scope_4x: 85, button: 52, method: "SIN DPI (FÃ¡brica)", note: "DPI de fÃ¡brica. Compensado con alta sensibilidad in-game para control de recoil.", has_dpi: false, level: "BAJA" },
            
            { base_model: "Redmi Note 13 Pro", model: "Redmi Note 13 Pro (Sensibilidad ALTA)", dpi: 620, general: 96, red_dot: 93, scope_2x: 89, scope_4x: 82, button: 48, method: "CON DPI (Equilibrada Pro)", note: "Jugadores agresivos con buen control de recoil.", has_dpi: true, level: "ALTA" },
            { base_model: "Redmi Note 13 Pro", model: "Redmi Note 13 Pro (Sensibilidad MEDIA)", dpi: "Default (440)", general: 98, red_dot: 95, scope_2x: 91, scope_4x: 86, button: 52, method: "SIN DPI (Control)", note: "Prioriza precisiÃ³n, usa DPI de fÃ¡brica.", has_dpi: false, level: "MEDIA" },
            { base_model: "Redmi Note 13", model: "Redmi Note 13 (Sensibilidad MEDIA)", dpi: 560, general: 93, red_dot: 89, scope_2x: 85, scope_4x: 77, button: 53, method: "CON DPI (Media)", note: "Sensibilidad suave y rÃ¡pida. Excelente para arrastre vertical.", has_dpi: true, level: "MEDIA" },
            { base_model: "Redmi Note 13", model: "Redmi Note 13 (Sensibilidad BAJA)", dpi: "Default (400)", general: 95, red_dot: 91, scope_2x: 87, scope_4x: 80, button: 53, method: "SIN DPI (EstÃ¡ndar)", note: "DPI de fÃ¡brica. ConfiguraciÃ³n de juego equilibrada.", has_dpi: false, level: "BAJA" },
            { base_model: "Redmi Note 12 Pro", model: "Redmi Note 12 Pro (Sensibilidad MEDIA)", dpi: 580, general: 96, red_dot: 93, scope_2x: 89, scope_4x: 80, button: 50, method: "CON DPI (Equilibrada)", note: "Respuesta rÃ¡pida para pantallas AMOLED.", has_dpi: true, level: "MEDIA" },
            { base_model: "Redmi Note 12 Pro", model: "Redmi Note 12 Pro (Sensibilidad BAJA)", dpi: "Default (440)", general: 98, red_dot: 95, scope_2x: 92, scope_4x: 85, button: 54, method: "SIN DPI (Segura)", note: "DPI de fÃ¡brica. Control en rangos medios.", has_dpi: false, level: "BAJA" },

            // --- [NUEVO] XIAOMI / REDMI: GAMA MEDIA / ENTRADA (14C) ---
            // El DPI de fÃ¡brica es reportado cerca de 360/392. Usaremos 380 como base.
            { base_model: "Redmi 14C", model: "Redmi 14C (Sensibilidad ALTA)", dpi: 600, general: 95, red_dot: 92, scope_2x: 88, scope_4x: 82, button: 50, method: "CON DPI (Agresiva)", note: "DPI alto para maximizar la velocidad de giro en el Helio G81. Ideal para distancias cortas.", has_dpi: true, level: "ALTA" },
            { base_model: "Redmi 14C", model: "Redmi 14C (Sensibilidad MEDIA)", dpi: 520, general: 90, red_dot: 86, scope_2x: 82, scope_4x: 75, button: 55, method: "CON DPI (Equilibrada)", note: "Punto Ã³ptimo entre control y velocidad. Recomendado para la mayorÃ­a de jugadores.", has_dpi: true, level: "MEDIA" },
            { base_model: "Redmi 14C", model: "Redmi 14C (Sensibilidad BAJA)", dpi: "Default (380)", general: 95, red_dot: 90, scope_2x: 85, scope_4x: 78, button: 58, method: "SIN DPI (Estable)", note: "DPI de fÃ¡brica. Prioriza la estabilidad y el control de recoil, compensado con alta sensibilidad in-game.", has_dpi: false, level: "BAJA" },
            // --- FIN DEL Redmi 14C ---

            // --- XIAOMI / REDMI: GAMA MEDIA (Note 11/10/12) ---
            { base_model: "Redmi 12", model: "Redmi 12 (Sensibilidad ALTA)", dpi: 560, general: 95, red_dot: 90, scope_2x: 85, scope_4x: 77, button: 52, method: "CON DPI (RÃ¡pida)", note: "Velocidad extrema para un arrastre rÃ¡pido. Requiere control de recoil.", has_dpi: true, level: "ALTA" },
            { base_model: "Redmi 12", model: "Redmi 12 (Sensibilidad MEDIA)", dpi: 520, general: 91, red_dot: 87, scope_2x: 83, scope_4x: 75, button: 55, method: "CON DPI (Equilibrada)", note: "El mejor punto medio entre velocidad y precisiÃ³n.", has_dpi: true, level: "MEDIA" },
            { base_model: "Redmi 12", model: "Redmi 12 (Sensibilidad BAJA)", dpi: "Default (395)", general: 96, red_dot: 91, scope_2x: 87, scope_4x: 80, button: 58, method: "SIN DPI (Estable)", note: "DPI de fÃ¡brica. Prioriza la estabilidad y el control de la mira.", has_dpi: false, level: "BAJA" },
            { base_model: "Redmi Note 11", model: "Redmi Note 11 (Sensibilidad MEDIA)", dpi: 520, general: 91, red_dot: 87, scope_2x: 83, scope_4x: 75, button: 55, method: "CON DPI (Medio)", note: "DPI equilibrado para rendimiento en AMOLED.", has_dpi: true, level: "MEDIA" },
            { base_model: "Redmi Note 11", model: "Redmi Note 11 (Sensibilidad BAJA)", dpi: "Default (409)", general: 95, red_dot: 92, scope_2x: 88, scope_4x: 80, button: 55, method: "SIN DPI (Segura)", note: "DPI de fÃ¡brica. BotÃ³n ideal para agarre cÃ³modo.", has_dpi: false, level: "BAJA" },
            
            // --- XIAOMI / REDMI: GAMA BASE / ANTIGUA (10, 9, 8, 13C) ---
            { base_model: "Redmi 10", model: "Redmi 10 (Sensibilidad BAJA)", dpi: 500, general: 90, red_dot: 86, scope_2x: 80, scope_4x: 70, button: 57, method: "CON DPI (Baja)", note: "Conservador para evitar el lag.", has_dpi: true, level: "BAJA" },
            { base_model: "Redmi 10", model: "Redmi 10 (Sensibilidad MEDIA)", dpi: "Default (395)", general: 93, red_dot: 89, scope_2x: 83, scope_4x: 75, button: 57, method: "SIN DPI (Control)", note: "BotÃ³n grande para mejor hit rate.", has_dpi: false, level: "MEDIA" },
            { base_model: "Redmi 9", model: "Redmi 9 (Sensibilidad BAJA)", dpi: 480, general: 88, red_dot: 84, scope_2x: 78, scope_4x: 68, button: 58, method: "CON DPI (Estable)", note: "Bajo DPI. Ideal para asegurar estabilidad en dispositivos mÃ¡s antiguos.", has_dpi: true, level: "BAJA" },
            
            // --- POCO SERIES ---
            { base_model: "Xiaomi Poco X6", model: "Xiaomi Poco X6 (Sensibilidad MEDIA)", dpi: 550, general: 90, red_dot: 85, scope_2x: 80, scope_4x: 70, button: 46, method: "CON DPI", note: "Buen equilibrio entre velocidad y control.", has_dpi: true, level: "MEDIA" },
            
            // --- SAMSUNG GALAXY: GAMA ALTA / S SERIES ---
            { base_model: "Samsung Galaxy S23 Ultra", model: "Samsung Galaxy S23 Ultra (Sensibilidad ALTA)", dpi: 720, general: 98, red_dot: 95, scope_2x: 92, scope_4x: 88, button: 50, method: "CON DPI", note: "Alta fluidez y precisiÃ³n, recomendado para 'Arrastre'.", has_dpi: true, level: "ALTA" },
            
            // --- SAMSUNG GALAXY: GAMA MEDIA (A Series) ---
            { base_model: "Samsung Galaxy A54", model: "Samsung Galaxy A54 (Sensibilidad MEDIA)", dpi: 520, general: 90, red_dot: 85, scope_2x: 82, scope_4x: 75, button: 55, method: "CON DPI (EstÃ¡ndar)", note: "Ã“ptimo para sensibilidad media/alta y control.", has_dpi: true, level: "MEDIA" },
            { base_model: "Samsung Galaxy A54", model: "Samsung Galaxy A54 (Sensibilidad BAJA)", dpi: "Default (384)", general: 95, red_dot: 90, scope_2x: 88, scope_4x: 80, button: 55, method: "SIN DPI (Comodidad)", note: "Ideal para jugar a 40 FPS.", has_dpi: false, level: "BAJA" },
            

            // --- APPLE IPHONE (TODAS LAS GENERACIONES) ---
            { base_model: "iPhone 15 Pro Max", model: "iPhone 15 Pro Max (Sensibilidad ALTA)", dpi: "N/A", general: 100, red_dot: 99, scope_2x: 96, scope_4x: 94, button: 45, method: "SIN DPI (iOS)", note: "iOS: DPI no aplica. Sensibilidad al mÃ¡ximo por defecto.", has_dpi: false, level: "ALTA" },
            { base_model: "iPhone 11", model: "iPhone 11 (Sensibilidad MEDIA)", dpi: "N/A", general: 98, red_dot: 95, scope_2x: 92, scope_4x: 88, button: 48, method: "SIN DPI (iOS)", note: "Buena opciÃ³n para iPhone 11/XR/SE (2da Gen).", has_dpi: false, level: "MEDIA" },
            
            // --- OTROS FABRICANTES ---
            // --- Infinix Smart 9 (3 Niveles) ---
            { base_model: "Infinix Smart 9", model: "Infinix Smart 9 (Sensibilidad ALTA)", dpi: 580, general: 93, red_dot: 88, scope_2x: 83, scope_4x: 75, button: 52, method: "CON DPI (RÃ¡pida)", note: "DPI alto para maximizar la velocidad de giro.", has_dpi: true, level: "ALTA" },
            { base_model: "Infinix Smart 9", model: "Infinix Smart 9 (Sensibilidad MEDIA)", dpi: 520, general: 90, red_dot: 85, scope_2x: 80, scope_4x: 72, button: 55, method: "CON DPI (Medio)", note: "Punto dulce para arrastre y control en miras 2x.", has_dpi: true, level: "MEDIA" },
            { base_model: "Infinix Smart 9", model: "Infinix Smart 9 (Sensibilidad BAJA)", dpi: "Default (360)", general: 95, red_dot: 90, scope_2x: 85, scope_4x: 78, button: 58, method: "SIN DPI (FÃ¡brica)", note: "DPI de fÃ¡brica. Mayor estabilidad en tiro y control de recoil.", has_dpi: false, level: "BAJA" },
            { base_model: "Motorola Edge 40", model: "Motorola Edge 40 (Sensibilidad MEDIA)", dpi: 650, general: 96, red_dot: 92, scope_2x: 88, scope_4x: 80, button: 52, method: "CON DPI", note: "Ã“ptimo para sensibilidad media/alta y control.", has_dpi: true, level: "MEDIA" },
        ];
        // --- FIN DE BASE DE DATOS REESTRUCTURADA ---


        // FunciÃ³n para renderizar una lÃ­nea de sensibilidad
        window.renderSensor = (label, value) => {
            return `
                <div class="flex flex-col items-center p-2 bg-gray-900 rounded-md">
                    <span class="text-pink-300 font-semibold">${label}</span>
                    <span class="text-xl font-extrabold">${value}%</span>
                </div>
            `;
        }

        // FunciÃ³n para renderizar una configuraciÃ³n individual
        window.renderResult = (config, container) => {
            const isDefaultDPI = !config.has_dpi;
            const dpiColorClass = isDefaultDPI ? 'text-dpi-default' : 'text-dpi-custom';
            // Clases para el nivel de sensibilidad
            const levelClass = `level-${config.level || 'MEDIA'}`;
            
            const html = `
                <div class="card-result p-6 rounded-xl space-y-4 mb-6">
                    <div class="flex justify-between items-center pb-2 border-b border-gray-700">
                        <h2 class="text-2xl font-extrabold text-pink-300">${config.model}</h2>
                        <span class="px-3 py-1 rounded-full text-sm font-bold shadow-md ${levelClass}">NIVEL ${config.level || 'MEDIA'}</span>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4 text-sm font-medium pt-3">
                        <div class="bg-gray-700/50 p-3 rounded-lg flex justify-between items-center">
                            <span>DPI (Ancho MÃ¡s PequeÃ±o):</span>
                            <span class="text-lg font-bold ${dpiColorClass}">${config.dpi}</span>
                        </div>
                        <div class="bg-gray-700/50 p-3 rounded-lg flex justify-between items-center">
                            <span>BotÃ³n de Disparo:</span>
                            <span class="text-xl font-extrabold text-red-500 bg-red-900/40 px-3 py-1 rounded-md border border-red-500">${config.button}%</span>
                        </div>
                    </div>

                    <div class="bg-gray-700/50 p-4 rounded-lg">
                        <h3 class="text-lg font-bold mb-2 text-red-400">SENSIBILIDAD IN-GAME</h3>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-3 text-xs">
                            ${renderSensor('General', config.general)}
                            ${renderSensor('Punto Rojo', config.red_dot)}
                            ${renderSensor('Mira 2x', config.scope_2x)}
                            ${renderSensor('Mira 4x', config.scope_4x)}
                        </div>
                    </div>

                    <p class="text-sm italic text-gray-400 pt-2 border-t border-gray-700">Nota: ${config.note}</p>
                </div>
            `;
            container.insertAdjacentHTML('beforeend', html); 
        }

        // LÃ³gica principal de bÃºsqueda (Simplificada para mostrar todos los niveles)
        window.searchSensitivity = () => {
            const dbToUse = isDataLoaded ? SENSITIVITY_DB : INITIAL_DATA; 
            const input = document.getElementById('deviceInput').value.toLowerCase().trim();
            const resultsContainer = document.getElementById('resultsContainer');
            
            resultsContainer.innerHTML = ''; 

            if (input.length < 3) {
                resultsContainer.innerHTML = `<p class="text-center text-yellow-400">Por favor, ingresa al menos 3 caracteres del modelo.</p>`;
                return;
            }

            // 1. Encontrar coincidencias del modelo
            const allMatches = dbToUse.filter(device => 
                device.base_model.toLowerCase().includes(input) || 
                device.model.toLowerCase().includes(input)
            );

            if (allMatches.length === 0) {
                resultsContainer.innerHTML = `<div class="p-6 bg-gray-800 rounded-lg text-center">
                                                <p class="text-xl font-semibold text-red-400">ðŸš¨ Modelo no encontrado ðŸš¨</p>
                                                <p class="mt-2 text-gray-400">AsegÃºrate de escribir el modelo principal (ej: "Redmi 14 Pro", "A05").</p>
                                            </div>`;
                return;
            }

            // 2. Usar el modelo base del primer match para obtener TODAS sus configuraciones
            const targetBaseModel = allMatches[0].base_model; 
            const relevantConfigs = dbToUse.filter(device => 
                device.base_model === targetBaseModel
            );
            
            // 3. Ordenar las configuraciones por nivel (ALTA, MEDIA, BAJA) antes de mostrar
            const sortedConfigs = relevantConfigs.sort((a, b) => {
                const order = { "ALTA": 1, "MEDIA": 2, "BAJA": 3 };
                return (order[a.level] || 4) - (order[b.level] || 4); // Las que no tienen nivel van al final
            });

            // 4. Renderizar los resultados
            resultsContainer.innerHTML = ''; 
            resultsContainer.insertAdjacentHTML('afterbegin', `<h2 class="text-3xl font-extrabold text-white mb-6">Resultados para: <span class="text-pink-400">${targetBaseModel}</span></h2>`);
            
            sortedConfigs.forEach(config => {
                renderResult(config, resultsContainer);
            });
        }

        // Se mantiene la lÃ³gica de Firebase pero se deshabilita la conexiÃ³n externa si no es necesaria
        
        // --- INICIO DE CÃ“DIGO DE FIREBASE (manteniÃ©ndolo si lo usas) ---
        async function seedDatabase() {
            // LÃ³gica de siembra omitida para la respuesta final, asumiendo que se usa la data local si no hay Firebase
        }

        function setupFirestoreListener() {
            // LÃ³gica de listener omitida para la respuesta final
        }

        const app = initializeApp(firebaseConfig);
        db = getFirestore(app);
        auth = getAuth(app);

        onAuthStateChanged(auth, async (user) => {
            // LÃ³gica de autenticaciÃ³n omitida o simplificada
            const loadingMessage = document.getElementById('loadingMessage');
            if (loadingMessage) {
                loadingMessage.innerHTML = `<p class="text-xl font-semibold text-gray-400">âœ… Base de datos (Local/Firebase) cargada. Â¡A buscar! ðŸŽ¯</p>`;
            }
        });
        // --- FIN DE CÃ“DIGO DE FIREBASE (manteniÃ©ndolo si lo usas) ---

    </script>
</body>
</html>